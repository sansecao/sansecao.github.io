(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{457:function(v,_,l){"use strict";l.r(_);var i=l(43),t=Object(i.a)({},(function(){var v=this,_=v.$createElement,l=v._self._c||_;return l("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[l("h1",{attrs:{id:"浏览器多线程架构"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#浏览器多线程架构"}},[v._v("#")]),v._v(" 浏览器多线程架构")]),v._v(" "),l("p",[v._v("浏览器的进程包括：")]),v._v(" "),l("ol",[l("li",[v._v("Browser进程（主进程）\n"),l("ul",[l("li",[v._v("前进后退")]),v._v(" "),l("li",[v._v("页面管理创建销毁其他进程")]),v._v(" "),l("li",[v._v("网络资源的管理下载")]),v._v(" "),l("li",[v._v("将render进程得到的内存中的bitMap，绘制到用户界面")])])]),v._v(" "),l("li",[v._v("浏览器渲染进程\n"),l("ul",[l("li",[v._v("默认每个Tab页面一个进程，互不影响")]),v._v(" "),l("li",[v._v("用于渲染页面、执行脚本、事件处理")]),v._v(" "),l("li",[v._v("浏览器渲染进程包括\n"),l("ul",[l("li",[v._v("GUI渲染线程\n"),l("ul",[l("li",[v._v("负责渲染浏览器界面，解析HTML、CSS、构建DOM树和渲染树，布局和绘制")]),v._v(" "),l("li",[v._v("界面重排重绘")]),v._v(" "),l("li",[v._v("GUI渲染线程与JS线程互斥，当JS引擎线程执行时，GUI线程被挂起，GUI的更新会保存在一个队列中等JS引擎线程空闲时间立即被执行。\n"),l("ul",[l("li",[v._v("为什么GUI与JS引擎线程互斥\n"),l("ul",[l("li",[v._v("JS可以操作DOM如果在修改元素同时渲染界面（即JS线程和GUI线程同时进行），渲染线程前后获得的数据很可能不一致")])])])])])])]),v._v(" "),l("li",[v._v("JS引擎线程\n"),l("ul",[l("li",[v._v("负责处理JS脚本（如V8引擎）")]),v._v(" "),l("li",[v._v("JS引擎等待任务队列中任务的到来，")]),v._v(" "),l("li",[v._v("注意JS线程与GUI线程互斥，如果JS执行的时间过长，就会导致页面渲染不连贯，导致页面渲染加载阻塞")])])]),v._v(" "),l("li",[v._v("事件触发线程\n"),l("ul",[l("li",[v._v("归属浏览器而不是JS引擎，用来控制事件循环")]),v._v(" "),l("li",[v._v("当JS引擎执行代码块，如点击事件，Ajax等会将对应任务添加到事件线程中")]),v._v(" "),l("li",[v._v("当对应的事件被触发时，该线程会把事件添加到待处理队列的尾部，等待JS引擎的处理")]),v._v(" "),l("li",[v._v("由于JS的单线程关系，所有这些待处理事件都要排队等JS引擎处理")])])]),v._v(" "),l("li",[v._v("定时触发器线程\n"),l("ul",[l("li",[v._v("setInterval，setTimeout所在线程")]),v._v(" "),l("li",[v._v("浏览器定时计数器并不是JS引擎计数的（因为JS引擎是单线程的如果处于阻塞线程状态就会影响计数的准确度）")]),v._v(" "),l("li",[v._v("因此通过单独的线程来计时并触发定时（即使完毕后，添加到事件队列的尾部，等JS引擎空闲后再执行）")]),v._v(" "),l("li",[v._v("另外setTimeout中低于4ms，按4ms计算")])])]),v._v(" "),l("li",[v._v("异步请求线程\n"),l("ul",[l("li",[v._v("XMLHttpRequest在连接建立后通过浏览器新开一个线程请求")]),v._v(" "),l("li",[v._v("请求状态变化时，如果有回调函数，异步请求线程产生状态变化事件，将事件放入事件队列，再由JS引擎执行。")])])])])])])]),v._v(" "),l("li",[v._v("第三方插件进程\n"),l("ul",[l("li",[v._v("每种插件对应一个进程，仅当使用该插件时才会创建")])])]),v._v(" "),l("li",[v._v("GPU进程\n"),l("ul",[l("li",[v._v("最多一个，用于3D绘制等")])])])]),v._v(" "),l("p",[v._v("JS为什么单线程")]),v._v(" "),l("ul",[l("li",[v._v("JS的主要用途是与用户互动和操作DOM\n"),l("ul",[l("li",[v._v("如此如果是多线程会带来同步问题，比如两个线程一个在DOM上添加内容，一个删除了该DOM，会出现冲突")])])]),v._v(" "),l("li",[v._v("为利用CPU多核的能力，H5中使用Web Worker标准\n"),l("ul",[l("li",[v._v("允许JS创建多个线程")]),v._v(" "),l("li",[v._v("但是子线程完全受主线程控制，且不可以操作DOM")])])])])])}),[],!1,null,null,null);_.default=t.exports}}]);