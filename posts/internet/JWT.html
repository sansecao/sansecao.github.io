<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JSON WEB TOKEN | shirley&#39; blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Stay hungry, Stay foolish!">
    
    <link rel="preload" href="/assets/css/0.styles.f1147152.css" as="style"><link rel="preload" href="/assets/js/app.2b3c16d9.js" as="script"><link rel="preload" href="/assets/js/2.4bbb4ca5.js" as="script"><link rel="preload" href="/assets/js/24.52386a5a.js" as="script"><link rel="preload" href="/assets/js/10.40a72b24.js" as="script"><link rel="preload" href="/assets/js/32.3194c25a.js" as="script"><link rel="prefetch" href="/assets/js/100.e2d86fce.js"><link rel="prefetch" href="/assets/js/101.87d96723.js"><link rel="prefetch" href="/assets/js/102.45425e42.js"><link rel="prefetch" href="/assets/js/103.6af0e127.js"><link rel="prefetch" href="/assets/js/104.b4ab661c.js"><link rel="prefetch" href="/assets/js/105.5b617b43.js"><link rel="prefetch" href="/assets/js/106.ea384279.js"><link rel="prefetch" href="/assets/js/107.8125dc24.js"><link rel="prefetch" href="/assets/js/108.a18789e8.js"><link rel="prefetch" href="/assets/js/109.83a54884.js"><link rel="prefetch" href="/assets/js/11.cba0d063.js"><link rel="prefetch" href="/assets/js/12.b586c683.js"><link rel="prefetch" href="/assets/js/13.95964f08.js"><link rel="prefetch" href="/assets/js/14.c4135cc5.js"><link rel="prefetch" href="/assets/js/15.759a9198.js"><link rel="prefetch" href="/assets/js/16.59652573.js"><link rel="prefetch" href="/assets/js/17.61dcc6c1.js"><link rel="prefetch" href="/assets/js/18.68f43013.js"><link rel="prefetch" href="/assets/js/19.4a5eb9e0.js"><link rel="prefetch" href="/assets/js/20.75adf05c.js"><link rel="prefetch" href="/assets/js/21.b6833a90.js"><link rel="prefetch" href="/assets/js/22.90f21f7c.js"><link rel="prefetch" href="/assets/js/23.bc860dea.js"><link rel="prefetch" href="/assets/js/25.a0cb6fb9.js"><link rel="prefetch" href="/assets/js/26.511c5795.js"><link rel="prefetch" href="/assets/js/27.56ab9bfa.js"><link rel="prefetch" href="/assets/js/28.19378e6f.js"><link rel="prefetch" href="/assets/js/29.9d9ad706.js"><link rel="prefetch" href="/assets/js/3.7f35d7f4.js"><link rel="prefetch" href="/assets/js/30.2496cc1d.js"><link rel="prefetch" href="/assets/js/31.4ec1976d.js"><link rel="prefetch" href="/assets/js/33.4dd0ea1f.js"><link rel="prefetch" href="/assets/js/34.ba80214e.js"><link rel="prefetch" href="/assets/js/35.a38f77bd.js"><link rel="prefetch" href="/assets/js/36.e27e57ff.js"><link rel="prefetch" href="/assets/js/37.48a59729.js"><link rel="prefetch" href="/assets/js/38.cb6d26cb.js"><link rel="prefetch" href="/assets/js/39.3f26aea9.js"><link rel="prefetch" href="/assets/js/4.12f5ba8e.js"><link rel="prefetch" href="/assets/js/40.1418b91e.js"><link rel="prefetch" href="/assets/js/41.92b09304.js"><link rel="prefetch" href="/assets/js/42.903e83f0.js"><link rel="prefetch" href="/assets/js/43.755dd2d1.js"><link rel="prefetch" href="/assets/js/44.422c6a31.js"><link rel="prefetch" href="/assets/js/45.98f773d9.js"><link rel="prefetch" href="/assets/js/46.21568ddd.js"><link rel="prefetch" href="/assets/js/47.af720435.js"><link rel="prefetch" href="/assets/js/48.57441751.js"><link rel="prefetch" href="/assets/js/49.bc061280.js"><link rel="prefetch" href="/assets/js/5.6914d8cd.js"><link rel="prefetch" href="/assets/js/50.5d0486bf.js"><link rel="prefetch" href="/assets/js/51.e9e4bbab.js"><link rel="prefetch" href="/assets/js/52.714d60d4.js"><link rel="prefetch" href="/assets/js/53.01b53e3b.js"><link rel="prefetch" href="/assets/js/54.57b2a2d0.js"><link rel="prefetch" href="/assets/js/55.e2fee879.js"><link rel="prefetch" href="/assets/js/56.80e20210.js"><link rel="prefetch" href="/assets/js/57.4f0588e3.js"><link rel="prefetch" href="/assets/js/58.d578fa6b.js"><link rel="prefetch" href="/assets/js/59.10fb9f7b.js"><link rel="prefetch" href="/assets/js/6.14ed718f.js"><link rel="prefetch" href="/assets/js/60.11bb2c9c.js"><link rel="prefetch" href="/assets/js/61.0d11383a.js"><link rel="prefetch" href="/assets/js/62.1efb443f.js"><link rel="prefetch" href="/assets/js/63.e245d2cc.js"><link rel="prefetch" href="/assets/js/64.de76c297.js"><link rel="prefetch" href="/assets/js/65.271eea5c.js"><link rel="prefetch" href="/assets/js/66.04fea32b.js"><link rel="prefetch" href="/assets/js/67.13f49c25.js"><link rel="prefetch" href="/assets/js/68.85f7eee2.js"><link rel="prefetch" href="/assets/js/69.f3c52202.js"><link rel="prefetch" href="/assets/js/7.093c7dfd.js"><link rel="prefetch" href="/assets/js/70.b759c9c6.js"><link rel="prefetch" href="/assets/js/71.3c4ff64d.js"><link rel="prefetch" href="/assets/js/72.56f01204.js"><link rel="prefetch" href="/assets/js/73.df93a151.js"><link rel="prefetch" href="/assets/js/74.0a5629eb.js"><link rel="prefetch" href="/assets/js/75.a4e4581d.js"><link rel="prefetch" href="/assets/js/76.bd44f6a7.js"><link rel="prefetch" href="/assets/js/77.55317c5e.js"><link rel="prefetch" href="/assets/js/78.06d92cbc.js"><link rel="prefetch" href="/assets/js/79.c19a4ae3.js"><link rel="prefetch" href="/assets/js/8.03fdccde.js"><link rel="prefetch" href="/assets/js/80.283e9c1c.js"><link rel="prefetch" href="/assets/js/81.b5b11067.js"><link rel="prefetch" href="/assets/js/82.7e51ba1c.js"><link rel="prefetch" href="/assets/js/83.61351b1c.js"><link rel="prefetch" href="/assets/js/84.319edb79.js"><link rel="prefetch" href="/assets/js/85.22d7e042.js"><link rel="prefetch" href="/assets/js/86.c92c69db.js"><link rel="prefetch" href="/assets/js/87.306caa13.js"><link rel="prefetch" href="/assets/js/88.89b971eb.js"><link rel="prefetch" href="/assets/js/89.e1b69329.js"><link rel="prefetch" href="/assets/js/9.d4cdc2c8.js"><link rel="prefetch" href="/assets/js/90.0dcee3bb.js"><link rel="prefetch" href="/assets/js/91.1e4dbd51.js"><link rel="prefetch" href="/assets/js/92.b4b58e03.js"><link rel="prefetch" href="/assets/js/93.83f15204.js"><link rel="prefetch" href="/assets/js/94.8c1185ea.js"><link rel="prefetch" href="/assets/js/95.c60baccb.js"><link rel="prefetch" href="/assets/js/96.a35a69b4.js"><link rel="prefetch" href="/assets/js/97.b4801ac2.js"><link rel="prefetch" href="/assets/js/98.e3b41fb8.js"><link rel="prefetch" href="/assets/js/99.9663b909.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f1147152.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">shirley' blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Posts" class="dropdown-title"><span class="title">Posts</span> <span class="arrow down"></span></button> <button type="button" aria-label="Posts" class="mobile-dropdown-title"><span class="title">Posts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/posts/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/posts/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/posts/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/posts/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/posts/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/posts/nodeJS/" class="nav-link">
  nodeJS
</a></li><li class="dropdown-item"><!----> <a href="/posts/MySql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/posts/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/posts/internet/" class="nav-link router-link-active">
  internet
</a></li><li class="dropdown-item"><!----> <a href="/posts/MicroFE/" class="nav-link">
  MicroFrontends
</a></li><li class="dropdown-item"><!----> <a href="/posts/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/posts/question/" class="nav-link">
  question
</a></li><li class="dropdown-item"><!----> <a href="/posts/Browser/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><a href="/essay/" class="nav-link">
  Essay
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Posts" class="dropdown-title"><span class="title">Posts</span> <span class="arrow down"></span></button> <button type="button" aria-label="Posts" class="mobile-dropdown-title"><span class="title">Posts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/posts/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/posts/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/posts/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/posts/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/posts/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/posts/nodeJS/" class="nav-link">
  nodeJS
</a></li><li class="dropdown-item"><!----> <a href="/posts/MySql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/posts/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/posts/internet/" class="nav-link router-link-active">
  internet
</a></li><li class="dropdown-item"><!----> <a href="/posts/MicroFE/" class="nav-link">
  MicroFrontends
</a></li><li class="dropdown-item"><!----> <a href="/posts/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/posts/question/" class="nav-link">
  question
</a></li><li class="dropdown-item"><!----> <a href="/posts/Browser/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><a href="/essay/" class="nav-link">
  Essay
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nodeJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>internet</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/internet/" aria-current="page" class="sidebar-link">HTTP1.x-HTTP2-HTTPS</a></li><li><a href="/posts/internet/JWT.html" aria-current="page" class="active sidebar-link">JSON WEB TOKEN</a></li><li><a href="/posts/internet/多个请求如何书写.html" class="sidebar-link">多个请求如何书写</a></li><li><a href="/posts/internet/TCP的3次握手.html" class="sidebar-link">TCP 的三次握手四次挥手的相关知识</a></li><li><a href="/posts/internet/常见的状态码.html" class="sidebar-link">HTTP常见的状态码以及对应的含义</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MicroFrontends</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>tool</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>question</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="json-web-token"><a href="#json-web-token" class="header-anchor">#</a> JSON WEB TOKEN</h1> <p>其实在之前都没有听说这个知识点，但是现在 jwt 应该是目前最流行的跨域身份验证解决方案，现在我做的项目中也是使用 jwt，所以想把这个搞懂一下</p> <h2 id="_1-跨域身份验证"><a href="#_1-跨域身份验证" class="header-anchor">#</a> 1. 跨域身份验证</h2> <p>Internet 服务无法与用户身份验证分开，一般过程如下</p> <ol><li>用户向服务端发送用户名和密码</li> <li>验证服务器后，相关数据（如用户角色，登录时间等）将保存在当前会话中</li> <li>服务器向用户返回 session_id，session 信息都会写入到用户的 Cookie</li> <li>用户的每个后续请求都将通过在 cookie 中取出 session_id 传给服务器。</li> <li>服务器收到 session_id 并对比之前保存的数据，确认用户的身份</li></ol> <p><img src="/assets/img/ID-card-pass.73ea817c.png" alt="图解"></p> <p>这种模式最大的问题是，没有分布式架构，无法支持很想发展，如果使用一个服务器，该模式完全没有问题。但是如果他是服务器群集活面向服务的跨域体系结构的话，则需要一个统一的 session 数据库来保存会话数据实现共享，这样负载均衡下的每个服务器才可以正确的验证身份。</p> <p>eg: 常见的单点登陆需求，站点 A 和站点 B 提供同一公司的相关服务。现在要求是用户只需要登陆其中一个网站，然后他就会自动登陆到另一个网站，怎么做？</p> <p>一种解决方案是持续化 session 数据，写入数据库或文件持久层等，收到请求后，验证服务从持久层请求数据，该解决方案的有点在于架构清晰，但是缺点是架构修改比较麻烦，整个服务的验证逻辑层都需要重写，工作量大，而且由于依赖于持久层的数据库或者问题系统，会有单点风险，如果持久层失败，整个认证体系都会挂掉</p> <h2 id="_2-jwt-原则"><a href="#_2-jwt-原则" class="header-anchor">#</a> 2. JWT 原则</h2> <p>jwt 的原则是在服务器生粉验证之后，将生成一个 JSON 对象并将其发送回用户，如下所示：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;UserName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xuanliao&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Role&quot;</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Expire&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-10-11 11:42:56&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>之后，当用户于服务器通时，客户在请求中发回 JSON 对象。服务器仅依赖这个 JSON 对象来表示用户，为了防止用户篡改数据，服务器将在生成是添加签名</p> <h2 id="_3-jwt-的数据结构"><a href="#_3-jwt-的数据结构" class="header-anchor">#</a> 3. JWT 的数据结构</h2> <p>典型的 jwt 如下图</p> <p><img src="data:image/png;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCADtAoADASIAAhEBAxEB/8QAHAABAAEFAQEAAAAAAAAAAAAAAAECAwUGBwQI/8QAUBAAAgEDAgMDBwkEBQgJBQAAAAECAwQRBRIGITETQVEHFBUiVWGSFjJUcYGUsdHSCEKToSORweHwFyUzNDdEYnQnOENSU2VyhLNWgqLC8f/EABcBAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAoEQEAAQMEAgEEAgMAAAAAAAAAAQIREhMiQVEhMfADMmFxgaGxwdH/2gAMAwEAAhEDEQA/AO/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxc9c0unq8NJnqNtHUZrMbV1EqjWM5UevRNkWWv6RqF/XsLPUbWvd0M9rRp1VKcMPDyl05gZUFmpVhSpyqVJKMIrMpPol4mJpcU6BX02vqFLWbGdlbyUa1eNaLhTb6JvouqAzgNb/AMoHB/8A9TaV96h+Zcs+MuGdQu6VpZa9p9xc1XiFKlcRlKT9yTA2AEJ5JAAxuqazpmi28bjU7+3s6M5bIzr1FBOXhl9/Ixz4/wCEF14l0r71D8wNjBg9O4r4f1a5dtpus2N3cKLm6dCvGcsLq8Jnq1PWNO0W1851O+t7OhnHaV6igm/BZ6gZIGD0fizh/X6kqek6xZ3lSCzKFKqnJLxx1PXqWr6do9r51qV9Qs7fcodpXmoRy+iywMiDyRu7edorqNWm7dw7RVdy27cZ3Z8Mc8nj0viPRtblVjpWqWt66STqK3qKe3PTOOgGXBrdXjjhSjXnRrcRaZCrCTjKErmKaa5NNZFLjjhWtWhRpcRaZOpUkowhG5g3JvkkuYGyAxOq8QaRoapvVdTtbJVc7POKqhux1xnqerz218y8+84p+adn2vbbvU2Yzuz0xjnkD2Ax2matp2s2vnWmXtC8obnHtKE1OOV1WV9ZkQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA89atToUZ1a1SNOnBZlKcsJLxb7ixp2pWWqWULqxuqVzbybSq0pbotp4fP6wONat/1p9L5f7vH/AOGZGgf5l/aY1i1woU76hUkljHWEan/6snUv6T9qjTdnPZbrdju/oJ/mY/ys3fyV8r2l8QJPbVsJJteKjOH9qA3y98pOh8QcJcUvSalZ1dOsqnadpT29VKKa581lHNuHtGrz/Zw1aVtb1K1xe3e+MKcHKUlGcY8kuvRnPrevdcMaNfW9xnbr2lwnTx4dqmm/hkfUPkusVp/k00Gg1iUrZVJfXNuX9oHAuNODNM0HgnhG+p2NW31DUOV52kpZbwm1tfR8zcHwRa8O+WXhZ6HplzT0/so1a9RKU4Rm1LOZPpywZD9or/UOGsfTJ/hE7Pa87Wl/6I/ggL0fmkgAcn8vGnXep8IafRtbSvczWoQcoUabm1HZLL5HOeMuBtA0fyhcJaRaWc6dpfwpO6pupJuTc8Pm+a5H068HDfKp/tr4J8M0/wD5WBVwZwnHhry66lQ0/TrmhpVOzcaNSUZOGXGDa3vrzyY600//ACteVfVvS1arLRNIbp0qEZOKliW1L3Zabb68sH0A/wC04X5DJ+Z8W8YaZWSVwqylh9fVqTT/ABQFrym+T+w4N0q24s4XhV067sa0N6p1G44bwpc+/OE+5pnp8q2sriLyIaRq6STu61GpKK7pbZKS/rTNv8s93St/Jbqym1ms6dOC8ZOa/JnNuK6E7b9mvh2FWLUnWpzw/BubX8mB6eIeJNQ4p0zQeAOFpdpWq2dBahcQfqwWxZg2uiXWX2I65wbwjYcGaDR0uwjua9avWa9atPvk/wAEu5HCNP0+/wDJJqfDHEyrzutM1W2jG92xwo7lucPsTTT/AOFn0na3FG8t6Vzb1I1KNWEZ05xeVKL5poD518nXBmicZca8W09ZtJVoW9zKVPbUcNrdSWen1HU7TyN8EWV5QuqOmVI1qNSNSD85m8Si8rv9xx3gzgmfGXGXFNKnrN1pjtrmcnK3z6+akuT5rwOycE+Titwbq9e+qcQ3upRq0ey7O4TxF5Tz1fgBpH7RlGddcOU4LM51asIrxb24L/AGvVL7yPcSaBeJxv8ARrW4oSpy67Nksf1PcvsKf2gni84Ta6+dT/GBiOP0+AvKJqV9GLjpfEmm16dRR6KpKDT/APy2v/7mBuX7Pi/6NZf8/V/CB1c5R+z5/s1l/wA/V/CB1cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPFqFhQ1OwuLG6gqlvcUpUqsH3xksM4la8LeUvyd1rmw4Yhb6to9So50o1drcc97i2tr6ZxyZ3ohxUuoHJvJ3wFrtpxTe8XcW1qctWuIuNOlCSls3dW2uS5LCS6Ijyz8AatxktJq6Jb06te27SFVTqqGIyw11680zrSWA1kDhXlC8k+s6zp3DNHRbelUqafYq0uN1WMMYw+WevNyO0aZaLT9Ks7NJKNvQhS5eEYpHt2oYQHz/wAccI+U/jK8VK5srGdjaXM6lpsq04Pa3hN8+fJI6bwG+NPM7qPGNK1p1Yyirbzfbhxxzztfjg3PCCWAJAAHmu3WVrW83Sdbs5dnnpuxy/mfP2s8H+VrX+IdN1y+sdPleafjsHCrTjFYluWVnnzPooYA1vg6XEc9Ai+K4UI6p2s9yo427M+r05Gh8W8AcQWHGPyy4Jq0431VPzq0qNJTbWG1nk08LK8eaOv4wGkwOEXHB/lC8o2o2lHjBW2m6TbVO0nSotJzffhJvLxyy3yybj5U+Db/AIg4GttE0C2pynQr03Ck6igo04xawm/sOjKKT5BrIGm6jwjHXPJpQ4bvlGFeNlSpqWc9lWhFYafua/qMf5K9L4p4e0CWicR20I0raWbStCtGeYN84PHTD5r3PHcdCxywMID590rg7yocLcQ6zfaBZWKhf3E5N1qtOWY7248m+XU2SyreWl6hbK9ttLVo60O2cezyoZW7HPwydfwMAct8rnBmtcWXOgT0i3p1o2deU62+rGGE3HHXr0ZkvKrwZX404T82sqcJalbVY1bfdJRz3Sjl9Mrn9h0DBG1AaB5JOGNT4S4Olpmr0YUrnzupVUYVFNbWopPK+pnQCEkiQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxWrKjBScJyy8YhHLNT1Piy9o8Z6ToGm2Xb9tTncX05wlmhRXKLWO9yyuf945scXbmDCT1x09VoWC0rUZKrFt3So4o033KTbzl+5M8fEPEFzpFzZq2s1dQnW2XMHUVOcKWOdWO5pNR7/r6rAGzg0SHHErjje10aFCNraeZTu7qpfJ0akfW2w2pvDy1n6ja1qNtWtKdzbVqVxSqfMnSqxcZLOG084Y4uc2ZAHKZeUrWY8K19Ujpds6lO9duqrrxVLCr9nhxU3POOeUsfYbhofEa1K9vdOu7eFrqNrL/QqvGarQ7qlN8m4vl1Sw2I8xcnxNmzA0jiHizVdMvNItrXR3Kte3sKM6c6sJT7Np5lFRlldPnP1V3luy4r4hr32tUHw1UqRsa8KdBdtClvi4ptucnteP+EE+G9gswblBSlFxk0m4t5x7i8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEN4G5ASCMonIADIyAAyMgAMjIADIyBjNTr3tvZVJWFp51dNbadOU1CKb75S7orvxl+COV8NQq0eJOKY6zDT9T1CN5CM7ivCpHC7NNQgowliCzhLJ2XKNf0rh2OlX+t3lO8qqpqtwq7xFLsWoKPq5yn0zzX2Ej3deLNa8mLjOtxTKMYRS1mcYxg5OMY7IYS3JPHN9yMbxxcrhe9utev7a01C91OPo+zVeS7K1pdWpRfrOLTlKcl05Lkjc+GOG3w7T1Byv619c6hdSu61arCMMyaSwlFYXJIqq8NW1xfXOoXEldXlejKhCVzHfTpU31hGGVhPv55fe+mE8fpI8X/AG5Jq/CtPhqotBsqvntTiunSt7ee5Tp28YTTkouTctqpyeHk6xxFa6hb8MSocPWtKV3CHZ0I5pwhTysb3uWMLrhdTG/5NdCnpbtKzrzutkI072M9tW3UHmCo91OMX0S+3L5melw/ZXmm21jq/wDnbzdqSq3sISlKS72opLP2FnzFiPE3cbpVNR1Tyd6vYVLidVaZGvTclXt9k5UZqSnNc6m5tPmpbehv/AF5fata3fE1+2oajLfYWcVGTo0ILHJr96Ty2s+BfsvJ9YWsKtrWualfTql7O9lZdnGEJzk8qM8c5wi8NR6Z655YuaZwLbaLxZHWNNvbijZbKqem/OoxnUacpQ5+plpPCWPqET31/aTH+XOtQ1O+p8Za9q+s6fp8r23lYW1tSuU6kbWhWnJNZUkt2Hl92W+eD0K5pcQ6vpNC7stOdouI7rT507Wk40rilTp5i5pykpc+fh0Ohz4H0+44i1bVL6UruGoStp+bzWI0pUF6rTTy+fPD5FN1wZaVeI9M1O3uHa21lcVLvzO3oU4wqV5rDm2luy0+fXPuFPiIiVq8zMx88NqpUoUqUadOKjCEVGMV0SXcXyMrxJyAAyMgAMjIADJGUBIIyvEJpgSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQBIIJAAgkAAMgAMgABkZApl0NUsrW71Svf1ZapeUVTu6lKMKTioqKxjqja5fNZg+HF6up/8AP1vxRqmbRMx7bpm1MylaBc+3dR+KH6R6Aufb2o/FD9JmwTUq+QmUsH6Aufbuo/FD9I9AXPt3Ufih+kzgGcmUsH6Aufbuo/FD9I9AXPt3Ufih+kzgGdRlLCegLn29qPxQ/SPQFz7e1H4ofpM2BqVfIgylhPQFz7d1L4ofpHoC59u6l8UP0mbA1KvkQZSwnoC59u6j8UP0j0Bc+3dR+KH6TNgalXyDKWE9AXPt7Ufih+kegLn29qPxQ/SZsDUq+RBlLCegLn29qPxQ/SPQFz7e1H4ofpM2BqVfIgylhPQFz7e1H4ofpHoC59vaj8UP0mbA1KvkQZSwnoC59vaj8UP0j0Bc+3dR+KH6TNgalXyDKWD9AXPt3Ufih+kegLn27qPxQ/SZwDOTKWD9AXPt3Ufih+kegLn27qPxQ/SZwDOTKWD9AXPt3Ufih+kegLn27qPxQ/SZwDOTKWD9AXPt3Ufih+kegLn27qPxQ/SZwDOTKWqaxp13p+k17unrWoSnTSaUpQw+a/4TZabbpRy8tpNmM4ni5cO3iim24rCSy+qMlT5UoeOF+BqZyoiZ93n/AEszemP29KABhgAyAAAAAEASCCQAAAAAAAAAAAAAAAAAAAAAAAAAAAxy1W1c5x7XDhnOV1x1x/UxW1SjQuY0ZqeJR3KSWV3/AJE1NNtp7fU2pVFUaXfJPK/mVqwtlKUuyTcs5beeob2fl5XrNFr1KU3P1vVl6vJZy8vu5F1apQlDdFTfzV05c3jr0K/RlnhrsFzeerD0+3dOUOz9WUlLapNLKeVjwELf6fUrcdVp5m9ktqztf/eSltb/AKy7c38bbctjm4w38n3ZwRLTrWfaZpLFT52G+fPP4lc7C2qdrupqXarE8vqE2rM9Uo08741FjdnEc9HhkVNTUY1pdjUlGnCM1hc5Z7sFc9OtKjm5U03Npt5fdzJ9HWuycOy9WpFQksvml0RFvRwsPVaUbitRdOopUk5e6SSTyvwLtXUadGpNTi1TjTU3Nc+rwlgqnp1rUlJzpJuUXFvvw8ZX8kS7G3lJycHlwUM5fRdxUvRdbnqNKnP14tU+zU9/Xq8JYLEtboqrKnClObUcpR6/au5HrjYWsHFxoxW2Kivck8r+ZPo+1fLsY9W+XvCxP0+Yl5/StFQ5qTkuTUU2lLwb7mJ6l2MXKvbygowlOXNPGHj+eS9HTbZJrsVzWHzfP6/F+8lWFsmv6JcouHNt8nzYL0dLHpOMY7pUmkoSlP1l6u1rk/fzK1qVCWFBucpLMcLk85xz6c8FXo61yv6NPEXHnzyn1z45wR6LtHUcnT6x2pZ5Jc+i+1gvQ88NbpSoKs6U0pR3xXistZ/kX56h2VvKrVt5x2yS2ppt570XY6faJwxQj6m7b7t3X+slafaxUMUvmPMebCTNHS1b31O5p1KmNvZvE+aaXLPX6mRRv7RpunJLc8vEcZbx+aLqsreEYpQ5Jt9euVh58eRCsKCnSko4VJtxj4NrH4GomnkvSqlfUoVJ05NqUEm/fk8j1mnD/S05wzyjn96SeGj1rT7bl/RLk8r6ymWn20tu6lF7Zuazzw31ZYxj2RjyphfxnGMuyqR3VXS5rmn4/UVq8Sp1JypuKhU2fXzSz/MqVlQXSH7/AGnV/O8SmVpTacYtxjKe+aX7zz/cS9KbVPn1Frll+so81jryT+otPVqUHLtITglLauWW39XcenzG3X/Z/vKXXvXQp9HW3/hR+3mWJo5WMViGp0JSaakuWUlzbXj7uhXDUqNSk5qMuuMNY5Zxn6i+7G3knmmubyUej7ZRlFU0lLGUvc8i9HBtWHq8FWdNUpbt+1e/m1/YVS1KOyo1Tm5QbTi+S5dXnwLr0+2c3N01ubznLIlp1rLO6knl5eW+ovQXoR6Sp9m5dnNYTbTXTGM/iXJ3kVGTUG2qnZpeLIdhbuMk6fKa2y5vmiXZUJObcMufzubJtTatVL6FCFJ1Kc4uf7q5tf4yWp6pQjFuSkop85Ncsd7+zJ61Z28ZKSprKwUvTrV7s0YtS6ruLE08wsTS8kdXpSTlGnNxw3HHNyws8l4F16nSi2pKUcJPmuuVnH1l5WFso7VSSjs2Y7lHwJ8xt9yl2aykks92Ohb0dF6Fn0jTcltjKUOjkvHDeMfYFfxlUhFU5bZbVu5cm1lIqlY0XWjUUcNZyl0ef7SrzGituyO1xjti13eBNptWvStHZvcZKOUm33Zz+RanrlupxjCE6kZLKlFcu/8AI9CsKGIqVNSSi48+9P8A/rK42NvCOyNGCj4Jcv8AHNi9Ee4NqiGoQVSNKsuzqz+bDOcoiWpW8Ixcm05R3JY54/witafbRnCapR3Q5xk+bRMbC3iopU0tqaX1MXoNq1HVKUkpKMtnPMvDEd34Cnfqr2WKTW+W3DfzeWUy/wCaUN0ZbFmLbX9WPwKFZW8drUMOMtyeXyeMZJM0pelS76ipNPcmpOL5dMd793Mpq6iobXGjOe6Tgv8A1Lu/EuKyovG9b5bt2597/wAYJVlQW31PmzdRc385942m1YpapQrUqlWmpSjTS3P3vu+wuzvFGo4Rg5NVIwfPGM88kx062hHEKMYrO5pcsseZ05Zc8zlvU8y8V06CceDa81bVqKj6sZz6tpLDwu9eJ661yqUYNQclLnnHRES0+2njdSWF09xU7Si92Y53S3PLfUTNPCV+tqzLU6NNyUsqMeW7ubLlW7jTpb1FzfLMU+aJnZW1STlOlGTeG89+OhcnQp1IOMorDx05CZp4coivtbrXkKNGVRx3bcboprKyUTvoRbjsnvTS24737y/Ut6VVYnFNZz9bLfmVFZ9Tr19ZiMeSc+FEtSoRi36zxhPC8ehNS8hHPqScl3Y6ePMuRsbeMm1TWX1KHY0XVdRpvl0zyXvLek3qfP6SSTT3NpYSzzePzI8/jL5kHKPRSzjLxkuuzoSSi6awufL/AB7kHZ0e03KOMx2uPdj6iXpW1fa15/FSXaU3CO3c23+HiJX8Yxc+zlKntcty64XXkX5WdCTblBNvqVK3pKONixt2/YNpavt53fwU5QjTnKUYqTSXc+ghfUnJqScWl1xy+ouq1oKKWxcvf9hV5pQUdvZrHUXpLV9rPnsG2lCe5JNJrGevL+QhfRlCnU2NQnGUs+CXuKvNKD6wzyxzb6f4ZXG1pRcXGGHHO3n0z1G03KfPKeE1zi5OOfqKHexzBxptwl+9nGF4lzzSmuzUcxhT6RXQhWNCMoyVPnHpzG03LML5TjGcabcZSazld3+Mlyd/RjNRWZcstrokXYW1GHzYJc3L7X1KVZW6afZrk8i9JapaV7FP+khKGVmPflePuC1CnujGUZxcsYWM5z0L6taMU0oLDLasqCfOOfW3LL6P3Dalq0yvKUHLc8YltyVUbinXbUG3jnzRS7OlLPaJzbeW2Le2hQlNxbbk+/uXgNtl3X/D1AAy2AAAAABEvmskiXzWBguF5znpMpTnKT86uFmTy8drIzXQ0/Rtcp6baVLataXznG5rvMLaUlh1JNczILiy1x/qeo5/5SY4da/p1TVMxHi7YiTXvlba/RNQ+6TI+Vtr9D1H7pMiadXTYga78rbX6HqP3SY+Vtr9D1H7pMqadXTYga78rbX6HqP3SY+Vtr9D1H7pMGnV02IGu/K21+h6j90mPlba/Q9R+6TBp1dNiBrvyttfoeo/dJj5W2v0PUfukwadfTYga78rbX6HqP3SY+Vtr9D1H7pMGnV02IGu/K21+h6j90mPlba/Q9R+6TBp1dNiIka98rLX6HqP3SY+Vls/9z1H7pMXNKvpMa9T5aSourPsvMN3Z55bu0xnHibAjUtMvfSXGU7ulQuIUlY9m5VqMoetvzjmbcD6lM0zET1CQAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUsxevNrTsptPtafR/8SMoYzXKVSpprjRpSqzU4S2x6vEky0/dDnX9s2ZLcNxilrFf2VffDH8yr0vW9lXvwx/MuMpq0/IllQYr0vV9mXvwL8x6Xq+zL34F+ZMZXUpZXIyYr0xP2bffw1+ZPpifs2+/hr8xjJq0soPsMX6Zl7Nvv4S/MemX7Ovv4S/MYyalPbKfYDFemf/L77+D/AHk+mv8Ay+//AIP94xk1Ke2UBivTa9nX/wDB/vHppez77+D/AHjGo1ae2VBifTS+g338B/mR6bj9Av8A+A/zGM9GpT2y4MT6dh32N8v/AG7Hp2n9Cvvu7GE9GrT2ywMV6dp/Q73+AyPTtL6Jer/27LhV0alPbLAxXp2n9FvPu8iPTtH6Nd/d5DCro1Ke2UZi51JriChTUpbHbyk455N5RHp2h9Hu/u8izb3KvNfpVYUq0YRoSi3UpuPPK8RRTMXv+WK64qtETzDPAAy7gAAAAAAAIwvAYXgSAIwvAYXgSAIwvAYXgSAIwvAYXgSAIwvAYXgMrOM8yQIwvAYXgSAIwvAYXgSAIwvAYXgSAIwvAYXgSAIS5kgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjvJAFOGMPxKgSwpwMFQCWU7X4hLxKgUsjavAbUSAqnavFjYvFlRhNY4i03Q7vTrW9rONfUa3Y28Ixy20stvwiuWX3ZQGZ2r3kbfezXJcZ6A9Ws9Oo6hSr1bmNWanRnGUKap8pOcs+rzeF4sy9hqVnqtorqwuqNzbybiqlKalFtPDWUPafh7dvvZO0wlXiPTaXEdHh+VWT1Crbu5UIwbUYJ4zJ/u8+mTMRqQnJxjOMmuqTzgi2VbUMFQCWhThDBUAWhG0bSQFQ0EiTy3FzQtIwnXqRhGU4wWe+TeEl9rKPUAAAAAAAAAAAAA0Tyi6trHD2hy1jS9Qp0FCdKk6NS2jUUnOoo7stprCfT3GF4s13iThzWrayeuUFQradc3MK9Wyh61ajHdtfPo1jpzPT5U7+z1Pye3ErC7o3SV/Qot0Kinioq0cx5fvLw6lflU4Tr8U0OHadC1lcKnqcI3CSzsozTU5P3LCM+Zj+bf0vi/np4uF9f4n4k0mtd2GsWNzVdhRnGnK1jFUrio3uUmnzUYpvHV5PRoGrcX3+v6jbrULe6oaXqcLS4pu1jTdSi45lNPdykm1y8C/5J+HK3DHD1/b3NrOhVqX9ZpTi1KVOL2wf1NLkVcAutT4n4tnWsr63heX/b287i0q0o1IKKjlOUUuvd1N3jLx1/xm82892dEMNr18tL0a5u5295cUYRbqRs8drGPfKKys468uf1mZMZqlzp9lbu71K5hb0qa5znVcF/J8zM+lj25rYK8rcdcFTuNZq6tRq0b65t7idHsZ9g4Q2KoljdJPvwvqOuLocwWm63rvFMuKrGwVO1s6DtrC0vp1KVS6jJ5qVM5zTzyUdy59WkZjga+0fULrVZ2WnXematTqxjqVrdSm5xm84eW3GSeHhru+wseYsk+7t5AAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADm/Glro0quoSu6F5rGsXVsqNtZWicqlvT3Jpran2a3pN1H4cs4wdINP4q0bVdV0y4sdJpUbKs6sLihexuHBxqpp7nGMefTDy+eSTF1holKjX0+yla8TW+p61T1OjCNxqNnY1+2sezeYxUnBZhF81Jetuy2mdO0vWbXWOHoX2hVXfU9rjRnX30+0kuXNyjnr1ePE0ylwLrENVpTr07avpdHUJ6pTs3duKjcNJRSxTwoJ7pY8X/Xu1KhfahpMKeqUlZ3Dl/SQsrmUk1npvcYvmuvJfWan0nLmdbt+H+Kr2jXWk8S65qtJVJ05U8TtKq5JSbzGFuotdWpN9zzy23gjRdK0GrdW6v7O64gu8XWoSoSinzfJRgvm010X955NF4a1DQeOtevdN0ejHTLq3t4UpzuVDfOKlvfSUm8vm5Yz7zIaVo+qx8omo69eW9GjbV9PpW1NQr9o90ZtvuXLmZjgq5boACgAAAAAHhvbC21CNJXFNSdKpGrTl3xlF5TT+w9wAAAAAAAAAAAAAANdo8G8O22p+kKWk28bjtnXT5uKqPrNRb2qXvSybEAAAAA8s7W3qXNO4nQpSrU01CpKCco564fVHqAApUUpOSSy+r8SoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/Z" alt="jwt"></p> <p>分为三个部分</p> <ol><li>jwt 头</li> <li>有效荷载</li> <li>签名</li></ol> <h3 id="_3-1-jwt-头"><a href="#_3-1-jwt-头" class="header-anchor">#</a> 3.1 JWT 头</h3> <p>JWT 头部分是一个描述 JWT 元数据的 JSON 对象，通常如下所示</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HS256&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;typ&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JWT&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>从上面知道，alg 属性表示签名使用的算法，默认的是 HMAC SHA256（写为 HS256）；typ 属性表示令牌的类型，JWT 令牌统一写为 JWT。</p> <h3 id="_3-2-有效荷载"><a href="#_3-2-有效荷载" class="header-anchor">#</a> 3.2 有效荷载</h3> <p>有效荷载部分是 JWT 的肢体部分，也是 json 对象，包含需要传递的数据。JWT 指定七个默认字段供选择</p> <p>iss：发行人</p> <p>exp：到期时间</p> <p>sub：主题</p> <p>aud：用户</p> <p>nbf：在此之前不可用</p> <p>iat：发布时间</p> <p>jti：JWT ID 用于标识该 JWT</p> <p>除了着 7 个值还可以自定义私有字段</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;sub&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234567890&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xuanliao&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;admin&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>请注意，默认情况下 JWT 是未加密的，任何人都可以解读其内容，因此不要构建隐私信息字段，存放保密信息，以防止信息泄露。</p> <p>JSON 对象也使用 Base64 URL 算法转换为字符串保存。</p> <h3 id="_3-3-哈希签名"><a href="#_3-3-哈希签名" class="header-anchor">#</a> 3.3 哈希签名</h3> <p>签名哈希部分是对上面两部分数据签名，通过指定的算法生成哈希，以确保数据不会被篡改。</p> <p>首先，需要指定一个密码（secret）。该密码仅仅为保存在服务器中，并且不能向用户公开。然后，使用标头中指定的签名算法（默认情况下为 HMAC SHA256）根据以下公式生成签名。</p> <p>HMACSHA256(base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload),secret)</p> <p>在计算出签名哈希后，JWT 头，有效载荷和签名哈希的三个部分组合成一个字符串，每个部分用&quot;.&quot;分隔，就构成整个 JWT 对象。</p> <h3 id="_3-4-base64url-算法"><a href="#_3-4-base64url-算法" class="header-anchor">#</a> 3.4 Base64URL 算法</h3> <p>如前所述，JWT 头和有效载荷序列化的算法都用到了 Base64URL。该算法和常见 Base64 算法类似，稍有差别。</p> <p>作为令牌的 JWT 可以放在 URL 中（例如 api.example/?token=xxx）。 Base64 中用的三个字符是&quot;+&quot;，&quot;/&quot;和&quot;=&quot;，由于在 URL 中有特殊含义，因此 Base64URL 中对他们做了替换：&quot;=&quot;去掉，&quot;+&quot;用&quot;-&quot;替换，&quot;/&quot;用&quot;_&quot;替换，这就是 Base64URL 算法，很简单把。</p> <h2 id="_4-jwt-的用法"><a href="#_4-jwt-的用法" class="header-anchor">#</a> 4. JWT 的用法</h2> <p>客户端接收服务器返回的 JWT，将其存储在 Cookie 或 localStorage 中。</p> <p>此后，客户端将在与服务器交互中都会带 JWT。如果将它存储在 Cookie 中，就可以自动发送，但是不会跨域，因此一般是将它放入 HTTP 请求的 Header Authorization 字段中。</p> <p>Authorization: Bearer</p> <p>当跨域时，也可以将 JWT 被放置于 POST 请求的数据主体中。</p> <h2 id="_5-jwt-问题和趋势"><a href="#_5-jwt-问题和趋势" class="header-anchor">#</a> 5. JWT 问题和趋势</h2> <p>1、JWT 默认不加密，但可以加密。生成原始令牌后，可以使用改令牌再次对其进行加密。</p> <p>2、当 JWT 未加密方法是，一些私密数据无法通过 JWT 传输。</p> <p>3、JWT 不仅可用于认证，还可用于信息交换。善用 JWT 有助于减少服务器请求数据库的次数。</p> <p>4、JWT 的最大缺点是服务器不保存会话状态，所以在使用期间不可能取消令牌或更改令牌的权限。也就是说，一旦 JWT 签发，在有效期内将会一直有效。</p> <p>5、JWT 本身包含认证信息，因此一旦信息泄露，任何人都可以获得令牌的所有权限。为了减少盗用，JWT 的有效期不宜设置太长。对于某些重要操作，用户在使用时应该每次都进行进行身份验证。</p> <p>6、为了减少盗用和窃取，JWT 不建议使用 HTTP 协议来传输代码，而是使用加密的 HTTPS 协议进行传输。</p> <section class="back-to-top"><div class="rocket"><img src="/assets/img/backtotop.88303690.svg"></div></section> <div id="gitalk-container" class="gitask"></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">1/15/2021, 8:30:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/posts/internet/" class="prev router-link-active">
        HTTP1.x-HTTP2-HTTPS
      </a></span> <span class="next"><a href="/posts/internet/多个请求如何书写.html">
        多个请求如何书写
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2b3c16d9.js" defer></script><script src="/assets/js/2.4bbb4ca5.js" defer></script><script src="/assets/js/24.52386a5a.js" defer></script><script src="/assets/js/10.40a72b24.js" defer></script><script src="/assets/js/32.3194c25a.js" defer></script>
  </body>
</html>
