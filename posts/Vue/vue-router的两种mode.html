<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue-router | shirley&#39; blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Stay hungry, Stay foolish!">
    
    <link rel="preload" href="/assets/css/0.styles.f1147152.css" as="style"><link rel="preload" href="/assets/js/app.2b3c16d9.js" as="script"><link rel="preload" href="/assets/js/2.4bbb4ca5.js" as="script"><link rel="preload" href="/assets/js/13.95964f08.js" as="script"><link rel="preload" href="/assets/js/10.40a72b24.js" as="script"><link rel="preload" href="/assets/js/32.3194c25a.js" as="script"><link rel="prefetch" href="/assets/js/100.e2d86fce.js"><link rel="prefetch" href="/assets/js/101.87d96723.js"><link rel="prefetch" href="/assets/js/102.45425e42.js"><link rel="prefetch" href="/assets/js/103.6af0e127.js"><link rel="prefetch" href="/assets/js/104.b4ab661c.js"><link rel="prefetch" href="/assets/js/105.5b617b43.js"><link rel="prefetch" href="/assets/js/106.ea384279.js"><link rel="prefetch" href="/assets/js/107.8125dc24.js"><link rel="prefetch" href="/assets/js/108.a18789e8.js"><link rel="prefetch" href="/assets/js/109.83a54884.js"><link rel="prefetch" href="/assets/js/11.cba0d063.js"><link rel="prefetch" href="/assets/js/12.b586c683.js"><link rel="prefetch" href="/assets/js/14.c4135cc5.js"><link rel="prefetch" href="/assets/js/15.759a9198.js"><link rel="prefetch" href="/assets/js/16.59652573.js"><link rel="prefetch" href="/assets/js/17.61dcc6c1.js"><link rel="prefetch" href="/assets/js/18.68f43013.js"><link rel="prefetch" href="/assets/js/19.4a5eb9e0.js"><link rel="prefetch" href="/assets/js/20.75adf05c.js"><link rel="prefetch" href="/assets/js/21.b6833a90.js"><link rel="prefetch" href="/assets/js/22.90f21f7c.js"><link rel="prefetch" href="/assets/js/23.bc860dea.js"><link rel="prefetch" href="/assets/js/24.52386a5a.js"><link rel="prefetch" href="/assets/js/25.a0cb6fb9.js"><link rel="prefetch" href="/assets/js/26.511c5795.js"><link rel="prefetch" href="/assets/js/27.56ab9bfa.js"><link rel="prefetch" href="/assets/js/28.19378e6f.js"><link rel="prefetch" href="/assets/js/29.9d9ad706.js"><link rel="prefetch" href="/assets/js/3.7f35d7f4.js"><link rel="prefetch" href="/assets/js/30.2496cc1d.js"><link rel="prefetch" href="/assets/js/31.4ec1976d.js"><link rel="prefetch" href="/assets/js/33.4dd0ea1f.js"><link rel="prefetch" href="/assets/js/34.ba80214e.js"><link rel="prefetch" href="/assets/js/35.a38f77bd.js"><link rel="prefetch" href="/assets/js/36.e27e57ff.js"><link rel="prefetch" href="/assets/js/37.48a59729.js"><link rel="prefetch" href="/assets/js/38.cb6d26cb.js"><link rel="prefetch" href="/assets/js/39.3f26aea9.js"><link rel="prefetch" href="/assets/js/4.12f5ba8e.js"><link rel="prefetch" href="/assets/js/40.1418b91e.js"><link rel="prefetch" href="/assets/js/41.92b09304.js"><link rel="prefetch" href="/assets/js/42.903e83f0.js"><link rel="prefetch" href="/assets/js/43.755dd2d1.js"><link rel="prefetch" href="/assets/js/44.422c6a31.js"><link rel="prefetch" href="/assets/js/45.98f773d9.js"><link rel="prefetch" href="/assets/js/46.21568ddd.js"><link rel="prefetch" href="/assets/js/47.af720435.js"><link rel="prefetch" href="/assets/js/48.57441751.js"><link rel="prefetch" href="/assets/js/49.bc061280.js"><link rel="prefetch" href="/assets/js/5.6914d8cd.js"><link rel="prefetch" href="/assets/js/50.5d0486bf.js"><link rel="prefetch" href="/assets/js/51.e9e4bbab.js"><link rel="prefetch" href="/assets/js/52.714d60d4.js"><link rel="prefetch" href="/assets/js/53.01b53e3b.js"><link rel="prefetch" href="/assets/js/54.57b2a2d0.js"><link rel="prefetch" href="/assets/js/55.e2fee879.js"><link rel="prefetch" href="/assets/js/56.80e20210.js"><link rel="prefetch" href="/assets/js/57.4f0588e3.js"><link rel="prefetch" href="/assets/js/58.d578fa6b.js"><link rel="prefetch" href="/assets/js/59.10fb9f7b.js"><link rel="prefetch" href="/assets/js/6.14ed718f.js"><link rel="prefetch" href="/assets/js/60.11bb2c9c.js"><link rel="prefetch" href="/assets/js/61.0d11383a.js"><link rel="prefetch" href="/assets/js/62.1efb443f.js"><link rel="prefetch" href="/assets/js/63.e245d2cc.js"><link rel="prefetch" href="/assets/js/64.de76c297.js"><link rel="prefetch" href="/assets/js/65.271eea5c.js"><link rel="prefetch" href="/assets/js/66.04fea32b.js"><link rel="prefetch" href="/assets/js/67.13f49c25.js"><link rel="prefetch" href="/assets/js/68.85f7eee2.js"><link rel="prefetch" href="/assets/js/69.f3c52202.js"><link rel="prefetch" href="/assets/js/7.093c7dfd.js"><link rel="prefetch" href="/assets/js/70.b759c9c6.js"><link rel="prefetch" href="/assets/js/71.3c4ff64d.js"><link rel="prefetch" href="/assets/js/72.56f01204.js"><link rel="prefetch" href="/assets/js/73.df93a151.js"><link rel="prefetch" href="/assets/js/74.0a5629eb.js"><link rel="prefetch" href="/assets/js/75.a4e4581d.js"><link rel="prefetch" href="/assets/js/76.bd44f6a7.js"><link rel="prefetch" href="/assets/js/77.55317c5e.js"><link rel="prefetch" href="/assets/js/78.06d92cbc.js"><link rel="prefetch" href="/assets/js/79.c19a4ae3.js"><link rel="prefetch" href="/assets/js/8.03fdccde.js"><link rel="prefetch" href="/assets/js/80.283e9c1c.js"><link rel="prefetch" href="/assets/js/81.b5b11067.js"><link rel="prefetch" href="/assets/js/82.7e51ba1c.js"><link rel="prefetch" href="/assets/js/83.61351b1c.js"><link rel="prefetch" href="/assets/js/84.319edb79.js"><link rel="prefetch" href="/assets/js/85.22d7e042.js"><link rel="prefetch" href="/assets/js/86.c92c69db.js"><link rel="prefetch" href="/assets/js/87.306caa13.js"><link rel="prefetch" href="/assets/js/88.89b971eb.js"><link rel="prefetch" href="/assets/js/89.e1b69329.js"><link rel="prefetch" href="/assets/js/9.d4cdc2c8.js"><link rel="prefetch" href="/assets/js/90.0dcee3bb.js"><link rel="prefetch" href="/assets/js/91.1e4dbd51.js"><link rel="prefetch" href="/assets/js/92.b4b58e03.js"><link rel="prefetch" href="/assets/js/93.83f15204.js"><link rel="prefetch" href="/assets/js/94.8c1185ea.js"><link rel="prefetch" href="/assets/js/95.c60baccb.js"><link rel="prefetch" href="/assets/js/96.a35a69b4.js"><link rel="prefetch" href="/assets/js/97.b4801ac2.js"><link rel="prefetch" href="/assets/js/98.e3b41fb8.js"><link rel="prefetch" href="/assets/js/99.9663b909.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f1147152.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">shirley' blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Posts" class="dropdown-title"><span class="title">Posts</span> <span class="arrow down"></span></button> <button type="button" aria-label="Posts" class="mobile-dropdown-title"><span class="title">Posts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/posts/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/posts/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/posts/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/posts/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/posts/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/posts/nodeJS/" class="nav-link">
  nodeJS
</a></li><li class="dropdown-item"><!----> <a href="/posts/MySql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/posts/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/posts/internet/" class="nav-link">
  internet
</a></li><li class="dropdown-item"><!----> <a href="/posts/MicroFE/" class="nav-link">
  MicroFrontends
</a></li><li class="dropdown-item"><!----> <a href="/posts/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/posts/question/" class="nav-link">
  question
</a></li><li class="dropdown-item"><!----> <a href="/posts/Browser/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><a href="/essay/" class="nav-link">
  Essay
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Posts" class="dropdown-title"><span class="title">Posts</span> <span class="arrow down"></span></button> <button type="button" aria-label="Posts" class="mobile-dropdown-title"><span class="title">Posts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/posts/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/posts/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/posts/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/posts/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/posts/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/posts/nodeJS/" class="nav-link">
  nodeJS
</a></li><li class="dropdown-item"><!----> <a href="/posts/MySql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/posts/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/posts/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/posts/internet/" class="nav-link">
  internet
</a></li><li class="dropdown-item"><!----> <a href="/posts/MicroFE/" class="nav-link">
  MicroFrontends
</a></li><li class="dropdown-item"><!----> <a href="/posts/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/posts/question/" class="nav-link">
  question
</a></li><li class="dropdown-item"><!----> <a href="/posts/Browser/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><a href="/essay/" class="nav-link">
  Essay
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/Vue/" aria-current="page" class="sidebar-link">Vue</a></li><li><a href="/posts/Vue/vue初始化项目.html" class="sidebar-link">使用脚手架初始化项目</a></li><li><a href="/posts/Vue/axios.html" class="sidebar-link">Axios 在 Vue 中的使用</a></li><li><a href="/posts/Vue/vue-router的两种mode.html" class="active sidebar-link">vue-router</a></li><li><a href="/posts/Vue/keep-alive.html" class="sidebar-link">keep-alive</a></li><li><a href="/posts/Vue/mixins.html" class="sidebar-link">mixins</a></li><li><a href="/posts/Vue/自定义指令.html" class="sidebar-link">自定义指令</a></li><li><a href="/posts/Vue/diff.html" class="sidebar-link">diff 算法</a></li><li><a href="/posts/Vue/nextTick.html" class="sidebar-link">vue的nextTick</a></li><li><a href="/posts/Vue/vue中学习的问题.html" class="sidebar-link">vue 中好的问题</a></li><li><a href="/posts/Vue/vue面试问题.html" class="sidebar-link">vue面试问题</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nodeJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>internet</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MicroFrontends</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>tool</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>question</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> vue-router</h1> <p>前后端不分离的项目 利用 Ajax 可以在不刷新浏览器的情况下异步数据请求交互</p> <p>SPA --- 单页面应用（只有一个 html 文件，整个网站的所有内容都这一个 html 里，通过 js 来处理）</p> <p>页面交互式是无刷新的，<font color="red">页面跳转也是无刷新的</font></p> <p>实现单页面应用的就是现在要说的前后端分离+前端路由</p> <p>实现前端路由其实就是匹配不同的 url 路径，进行解析，加载不同的组件，然后动态的渲染在指定的 html 容器中</p> <h2 id="_1-vue-router-中的两种模式-mode"><a href="#_1-vue-router-中的两种模式-mode" class="header-anchor">#</a> 1. vue-router 中的两种模式（mode）</h2> <h3 id="_1-hash-模式"><a href="#_1-hash-模式" class="header-anchor">#</a> 1. hash 模式</h3> <ul><li>在 vue 项目中的地址中一般会有一个<code>#</code>，<font color="red">这个<code>#</code>后面就是<code>hash</code>值，<code>hash</code>的变化，并不会导致浏览器向服务器发送请求，浏览器不发出请求，页面就不会刷新。</font> 但是<code>hash</code>变化会促发<code>hashchange</code>这个事件，通过这个事件我们可以知道<code>hash</code>发生了哪些变化，然后监听<code>hashchange</code>来实现页面更新的部分</li></ul> <p><code>hash</code>模式背后的原理就是在 window 上面监听<code>onhaschange</code>事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>oldURL<span class="token punctuation">,</span> event<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// do something</span>
  <span class="token comment">// eg:</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>color <span class="token operator">=</span> hash<span class="token punctuation">;</span> <span class="token comment">// 通过页面hash来改变页面的颜色</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>图解如下：</p> <p><img src="data:image/png;base64,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" alt="图解"></p> <p>根据上图，选择<code>mode</code>之后，程序根据你选择的<code>mode</code>类型创建不同的<code>history</code>对象（<code>hash：HashHistory</code>，或者<code>history：HTML5History</code>或者<code>abstract：AbstractHistory</code>）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token string">&quot;history&quot;</span><span class="token operator">:</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HTML5History</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token string">&quot;hash&quot;</span><span class="token operator">:</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashHistory</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>base<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token string">&quot;abstract&quot;</span><span class="token operator">:</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbstractHistory</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token operator">:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">assert</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">invalid mode: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>HashHistory</code>有两个方法：<code>HashHistory.push()</code>将新路由添加到浏览器访问历史的栈顶；和<code>HashHistory.replace()</code>替换掉当前栈顶的路由</p> <p><img src="/assets/img/hash-push.8f983089.png" alt="图解"></p> <p><img src="/assets/img/hash-replace.8123b250.png" alt="图解"></p> <p>因为 hash 发生变化的 utl 会被浏览器记录（历史访问栈）下来，所以浏览器的前进后退都可以用 ===&gt; 浏览器没有请求服务器，但是页面状态和 url 一一关联起来</p> <h3 id="_2-history"><a href="#_2-history" class="header-anchor">#</a> 2. history</h3> <p>因为 HTML5 标准发布，多了两个 API，pushState()和 replaceState()。</p> <p><font color="red">1.通过这两个 API 可以改变 url 地址而且不会发送请求</font></p> <ol start="2"><li>不仅可以读取历史记录栈，还可以对浏览器历史记录进行修改</li></ol> <p>除此之外，还有 popState()事件，当浏览器跳转到新的状态时，将触发 popState 事件</p> <ul><li><p>修改历史状态</p> <ol><li>window.history.pushState(stateObject, title, URL)</li> <li>window.history.replaceState(stateObject, title, URL)</li></ol></li> <li><p>切换历史状态</p> <ol><li>history.go(-2) -------&gt; 后退两次</li> <li>history.go(2) -------&gt; 前进两次</li> <li>history.back() -------&gt; 后退</li> <li>history.forward() -------&gt; 前进</li></ol></li></ul> <h3 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h3> <ul><li><p>hashchange 只能改变<code>#</code>后面的 url 片段。而 pushState()设置的新的 URL 可以式与当前 URL 同源的任意 URL</p></li> <li><p>history 模式则会将 URL 修改得就和正常请求后端 URL 一样，如果后端没有配置对应得/user/id 的路由处理，则会返回 404 错误</p></li></ul> <p>当刷新页面之类的操作时候，浏览器会给服务器发送请求，所以这个实现需要服务器的支持，需要把所有都重定向到根页面，这也是为什么 history 模式下面刷新总是会报 404 的问题</p> <h2 id="_2-router-和-route-的区别"><a href="#_2-router-和-route-的区别" class="header-anchor">#</a> 2. router 和 route 的区别</h2> <ul><li><p>$router式vue-router的实例，想要导航到不同URL，则使用$router.push 或者$router.replace()或者$router.go()</p></li> <li><p>$route 是从当前跳转对象里面可以获取 name、path、query、params 等</p></li></ul> <h2 id="_3-query-和-params-的使用区别-动态组件传参"><a href="#_3-query-和-params-的使用区别-动态组件传参" class="header-anchor">#</a> 3. query 和 params 的使用区别(动态组件传参)</h2> <ol><li><code>query</code>参数传递，在跳转的时候是既可以使用<code>name</code>跳转也可以是使用<code>path</code>跳转的 ，（这个地方也有人说 query 只能够是 path 跳转，亲测之后用 name 也是可以的），不会在url上显示参数信息</li> <li><code>params</code>是路由的一部分，必须要在路由后面添加参数名，<code>query</code>是直接拼接在 url 后面的参数，没有也没有关系</li> <li><code>params</code>一旦设置在路由，<code>params</code>就是路由的一部分，如果路由有<code>params</code>传参，但是跳转的时候没有这个参数，会导致跳转失败，或者页面没有内容</li></ol> <h2 id="_4-vue-router-的钩子函数"><a href="#_4-vue-router-的钩子函数" class="header-anchor">#</a> 4. vue-router 的钩子函数</h2> <h3 id="_1-全局钩子"><a href="#_1-全局钩子" class="header-anchor">#</a> （1） 全局钩子</h3> <p>主要包括 beforeEach 和 afterEach</p> <ul><li><p>beforeEach 函数有三个参数：</p> <ul><li>to：router 即将进入的路由对象</li> <li>from：当前导航即将离开的的路由</li> <li>next：Function，进行管道中的一个钩子，如果执行完了，则导航的状态就是 confirmed（确认的），否则为 false，终止导航</li></ul></li> <li><p>afterEach 函数不用传 next()参数</p></li></ul> <p>这类钩子只要作用于全局，一般来判断权限，以及页面丢失的操作</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span> <span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> role <span class="token operator">=</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>'querystring<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>role <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">'/login'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'./login'</span><span class="token punctuation">)</span> <span class="token comment">// 如果没有身份认证则会跳到登陆页面</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>mate<span class="token punctuation">.</span>permission<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 是否许可进入的情况</span>
    role <span class="token operator">===</span> <span class="token string">'some if'</span> <span class="token operator">?</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/403'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">'版本判断'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>'版本过低，请先升级浏览器<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-单个路由里面的钩子"><a href="#_2-单个路由里面的钩子" class="header-anchor">#</a> （2） 单个路由里面的钩子</h3> <p>主要在某个指定路由跳转时候的执行的逻辑，参数和意义和之前的一样</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  path<span class="token operator">:</span><span class="token string">'/banch'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span><span class="token string">'Banch'</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/page/bamch/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  mate<span class="token operator">:</span><span class="token punctuation">{</span>
    index<span class="token operator">:</span><span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 进路由之前</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">beforeLeave</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 离开路由之前</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-组件里面路由钩子"><a href="#_3-组件里面路由钩子" class="header-anchor">#</a> （3） 组件里面路由钩子</h3> <p>只要包括 beforeRouteEnter、beforeRouteUpdate、boforeRouteLeave，参数和意义和之前的一样</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">beforeRouteEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 进组件之前</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function-variable function">beforeRouteUpdate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 组件更新之前（因为路由跳转影响的组件更新）</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function-variable function">boforeRouteLeave</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 离开组件之前</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><section class="back-to-top"><div class="rocket"><img src="/assets/img/backtotop.88303690.svg"></div></section> <div id="gitalk-container" class="gitask"></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">1/15/2021, 8:30:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/posts/Vue/axios.html" class="prev">
        Axios 在 Vue 中的使用
      </a></span> <span class="next"><a href="/posts/Vue/keep-alive.html">
        keep-alive
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2b3c16d9.js" defer></script><script src="/assets/js/2.4bbb4ca5.js" defer></script><script src="/assets/js/13.95964f08.js" defer></script><script src="/assets/js/10.40a72b24.js" defer></script><script src="/assets/js/32.3194c25a.js" defer></script>
  </body>
</html>
